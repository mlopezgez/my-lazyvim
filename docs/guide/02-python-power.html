<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Power Workflows | Vim Ninja Guide</title>
    <meta name="description" content="Master Python development with ty LSP, virtual environment management, and advanced diagnostics. Perfect for Poetry and standard projects.">
    <link rel="icon" type="image/svg+xml" href="../favicon.svg">
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/guide.css">
</head>
<body class="guide-page">
    <!-- Skip to Content -->
    <a href="#main-content" class="skip-to-content">Skip to content</a>

    <!-- Global Navigation Header -->
    <header class="guide-header">
        <div class="header-content">
            <a href="index.html" class="guide-logo">
                <span>üí§</span> Vim Ninja Guide
            </a>

            <nav class="main-nav" id="main-nav">
                <a href="01-ai-mastery.html">AI Mastery</a>
                <a href="02-python-power.html" class="active">Python Power</a>
                <a href="03-devops-flow.html">DevOps Flow</a>
                <a href="04-navigation.html">Navigation</a>
                <a href="05-git-workflow.html">Git Workflow</a>
                <a href="06-advanced.html">Advanced</a>
            </nav>

            <button class="search-btn" id="search-trigger" aria-label="Search keybinds">
                <span>/</span> Search
            </button>

            <div class="progress-indicator">
                <span id="progress-text">0/6 Completed</span>
            </div>

            <button class="hamburger" id="hamburger" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

    <!-- Two-Column Layout -->
    <div class="lesson-container">
        <!-- Table of Contents Sidebar -->
        <aside class="toc-sidebar">
            <h3>Table of Contents</h3>
            <!-- Auto-generated by JavaScript -->
        </aside>

        <!-- Main Lesson Content -->
        <main class="lesson-content" id="main-content">
            <h1>üêç Python Power Workflows</h1>
            <p style="font-size: 1.1rem; color: var(--text-secondary); margin-bottom: 3rem;">
                Master Python development with ty LSP, seamless virtual environment management, and advanced
                type checking. Perfect for Poetry, standard projects, and everything in between.
            </p>

            <button class="mark-complete-btn" id="mark-complete">
                ‚úì Mark Lesson as Complete
            </button>

            <!-- Introduction -->
            <section id="introduction">
                <h2>Introduction</h2>
                <p>
                    This configuration uses <strong>ty</strong>, Astral's blazingly fast Python LSP server,
                    instead of Pyright. Ty provides superior type inference, faster performance, and better
                    integration with modern Python tooling.
                </p>

                <div style="background: var(--bg-card); padding: 1.5rem; border-radius: 8px; margin: 2rem 0;">
                    <h3 style="color: var(--accent-blue); margin-bottom: 1rem;">Why ty over Pyright?</h3>
                    <ul style="color: var(--text-secondary);">
                        <li><strong style="color: var(--accent-green);">Performance:</strong> Written in Rust, ty is significantly faster for large codebases</li>
                        <li><strong style="color: var(--accent-green);">Type Inference:</strong> More accurate with complex type scenarios and generics</li>
                        <li><strong style="color: var(--accent-green);">Modern Python:</strong> First-class support for Python 3.10+ features (match statements, union types)</li>
                        <li><strong style="color: var(--accent-green);">Auto-Import:</strong> Intelligent import suggestions configured by default</li>
                    </ul>
                </div>

                <h3>What You'll Learn</h3>
                <ul>
                    <li>Managing Python virtual environments with venv-selector</li>
                    <li>Navigating code with LSP features (definitions, references, implementations)</li>
                    <li>Using diagnostics to catch type errors early</li>
                    <li>Leveraging auto-import and code completion</li>
                    <li>Integrating with Claude for type annotations and refactoring</li>
                </ul>

                <div class="tip-box">
                    <div class="tip-header">
                        <span class="tip-icon">üí°</span>
                        <span>Configuration Philosophy</span>
                    </div>
                    <p>
                        This setup is optimized for developer productivity: auto-import is enabled,
                        but verbose inlay hints are disabled by default. You can toggle hints when needed
                        with <kbd>&lt;leader&gt;uh</kbd>.
                    </p>
                </div>
            </section>

            <!-- Virtual Environment Management -->
            <section id="venv-management">
                <h2>Virtual Environment Management</h2>
                <p>
                    The <strong>venv-selector.nvim</strong> plugin automatically detects and activates Python
                    virtual environments. It searches for local <code>.venv</code> directories and Poetry caches,
                    then restarts the ty LSP when you switch environments.
                </p>

                <h3>Basic Operations</h3>
                <table class="keybind-table">
                    <thead>
                        <tr>
                            <th>Keybind</th>
                            <th>Description</th>
                            <th>When to Use</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><kbd>&lt;leader&gt;cv</kbd></td>
                            <td>Select Python virtual environment</td>
                            <td>First time opening a project, or switching between venvs</td>
                        </tr>
                        <tr>
                            <td><kbd>&lt;leader&gt;cV</kbd></td>
                            <td>Use cached venv (fast)</td>
                            <td>Quickly activate the last-used venv for this project</td>
                        </tr>
                    </tbody>
                </table>

                <div class="practice-exercise">
                    <div class="exercise-header">
                        <span class="exercise-icon">üéØ</span>
                        <h4>Practice Exercise: First-Time Project Setup</h4>
                    </div>
                    <div class="exercise-content">
                        <p><strong>Objective:</strong> Set up a new Python project with a virtual environment.</p>
                        <ol>
                            <li>Create a project directory: <code>mkdir ~/myproject && cd ~/myproject</code></li>
                            <li>Initialize with uv: <code>uv init</code></li>
                            <li>Create a venv: <code>uv venv</code></li>
                            <li>Open Neovim: <code>nvim .</code></li>
                            <li>Open a Python file: <code>:e main.py</code></li>
                            <li>Select the venv: <kbd>&lt;leader&gt;cv</kbd></li>
                            <li>Choose <code>.venv/bin/python</code> from the picker</li>
                            <li>Verify: Check your status line for Python version</li>
                        </ol>
                        <p class="success-criteria"><strong>‚úì Success:</strong> Status line shows correct Python version, ty LSP is attached.</p>
                    </div>
                </div>

                <h3>How venv-selector Works</h3>
                <p>When you press <kbd>&lt;leader&gt;cv</kbd>, venv-selector searches for Python executables in:</p>
                <ol>
                    <li><code>.venv/bin/python</code> in current directory and parents</li>
                    <li><code>~/Library/Caches/pypoetry/virtualenvs/*/bin/python</code> (Poetry cache on macOS)</li>
                </ol>

                <p style="margin-top: 1.5rem;">After selection, it:</p>
                <ul>
                    <li>Sets <code>VIRTUAL_ENV</code> environment variable</li>
                    <li>Activates the venv in Neovim's integrated terminal</li>
                    <li>Restarts the ty LSP to pick up the new environment</li>
                    <li>Shows a notification confirming activation</li>
                </ul>

                <div class="tip-box">
                    <div class="tip-header">
                        <span class="tip-icon">üí°</span>
                        <span>Fast Venv Switching</span>
                    </div>
                    <p>
                        Once you've selected a venv for a project, use <kbd>&lt;leader&gt;cV</kbd> (capital V)
                        next time. This instantly activates the cached venv without opening the picker.
                    </p>
                </div>

                <div class="workflow-pattern">
                    <div class="pattern-header">
                        <span class="pattern-icon">‚ö°</span>
                        <h4>Pattern 1: New Poetry Project Setup</h4>
                    </div>
                    <div class="pattern-steps">
                        <ol>
                            <li>Create project: <code>poetry new myapp && cd myapp</code></li>
                            <li>Install dependencies: <code>poetry install</code></li>
                            <li>Open Neovim: <code>nvim .</code></li>
                            <li>Select Poetry venv: <kbd>&lt;leader&gt;cv</kbd></li>
                            <li>Choose the venv from <code>~/Library/Caches/pypoetry/virtualenvs/</code></li>
                            <li>Start coding with full LSP support</li>
                        </ol>
                    </div>
                    <div class="pattern-tips">
                        <strong>üí° Tip:</strong> Poetry creates venvs with project-name-hash format in its cache.
                    </div>
                </div>

                <div class="workflow-pattern">
                    <div class="pattern-header">
                        <span class="pattern-icon">‚ö°</span>
                        <h4>Pattern 2: Multi-Project Workflow</h4>
                    </div>
                    <div class="pattern-steps">
                        <ol>
                            <li>Working on project A with venv A activated</li>
                            <li>Switch to project B directory</li>
                            <li>Open Python file in project B</li>
                            <li>Quick venv switch: <kbd>&lt;leader&gt;cV</kbd></li>
                            <li>If not cached: <kbd>&lt;leader&gt;cv</kbd> ‚Üí select venv B</li>
                            <li>ty restarts automatically</li>
                            <li>Continue with project B's dependencies</li>
                        </ol>
                    </div>
                </div>

                <div class="practice-exercise">
                    <div class="exercise-header">
                        <span class="exercise-icon">üéØ</span>
                        <h4>Practice Exercise: Poetry Dependencies</h4>
                    </div>
                    <div class="exercise-content">
                        <p><strong>Objective:</strong> Add a dependency and verify LSP recognizes it.</p>
                        <ol>
                            <li>In a Poetry project, add a package: <code>poetry add requests</code></li>
                            <li>In Neovim, create a new file: <code>:e test.py</code></li>
                            <li>Start typing: <code>import req</code></li>
                            <li>Trigger completion (ty auto-completes)</li>
                            <li>Select <code>requests</code> from suggestions</li>
                            <li>Type <code>requests.</code> and see method completions</li>
                        </ol>
                        <p class="success-criteria"><strong>‚úì Success:</strong> ty provides completions for the newly installed package.</p>
                    </div>
                </div>
            </section>

            <!-- LSP Features -->
            <section id="lsp-navigation">
                <h2>LSP Features with ty</h2>

                <h3>Code Navigation</h3>
                <p>
                    Navigate Python code at lightning speed using LSP-powered jumps. These keybinds use
                    Snacks pickers for a clean, searchable interface.
                </p>

                <table class="keybind-table">
                    <thead>
                        <tr>
                            <th>Keybind</th>
                            <th>Description</th>
                            <th>Example Use Case</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><kbd>gd</kbd></td>
                            <td>Go to definition</td>
                            <td>Jump to where a function/class is defined</td>
                        </tr>
                        <tr>
                            <td><kbd>gD</kbd></td>
                            <td>Go to declaration</td>
                            <td>Jump to variable declaration (rare in Python)</td>
                        </tr>
                        <tr>
                            <td><kbd>gr</kbd></td>
                            <td>Go to references</td>
                            <td>Find all places where this function is called</td>
                        </tr>
                        <tr>
                            <td><kbd>gI</kbd></td>
                            <td>Go to implementation</td>
                            <td>Find concrete implementations of abstract methods</td>
                        </tr>
                        <tr>
                            <td><kbd>gy</kbd></td>
                            <td>Go to type definition</td>
                            <td>Jump to the class definition of a variable's type</td>
                        </tr>
                        <tr>
                            <td><kbd>gai</kbd></td>
                            <td>LSP incoming calls</td>
                            <td>See which functions call this function</td>
                        </tr>
                        <tr>
                            <td><kbd>gao</kbd></td>
                            <td>LSP outgoing calls</td>
                            <td>See which functions this function calls</td>
                        </tr>
                    </tbody>
                </table>

                <div class="workflow-pattern">
                    <div class="pattern-header">
                        <span class="pattern-icon">‚ö°</span>
                        <h4>Pattern 3: Exploring Unfamiliar Code</h4>
                    </div>
                    <div class="pattern-steps">
                        <ol>
                            <li>Open a file you're unfamiliar with</li>
                            <li>Cursor on a function call</li>
                            <li>Jump to definition: <kbd>gd</kbd></li>
                            <li>Read the implementation</li>
                            <li>Find all usages: <kbd>gr</kbd></li>
                            <li>Browse through real-world usage examples</li>
                            <li>Check what it calls: <kbd>gao</kbd></li>
                            <li>Build mental model of the codebase</li>
                        </ol>
                    </div>
                    <div class="pattern-tips">
                        <strong>üí° Pro Tip:</strong> Use <kbd>Ctrl-o</kbd> to jump back to your previous location.
                    </div>
                </div>

                <div class="practice-exercise">
                    <div class="exercise-header">
                        <span class="exercise-icon">üéØ</span>
                        <h4>Practice Exercise: Class Hierarchy Navigation</h4>
                    </div>
                    <div class="exercise-content">
                        <p><strong>Objective:</strong> Navigate through a class hierarchy using LSP.</p>
                        <ol>
                            <li>Create a file with a base class and subclass:
<pre><code>class Animal:
    def speak(self):
        pass

class Dog(Animal):
    def speak(self):
        return "Woof!"

dog = Dog()
result = dog.speak()</code></pre>
                            </li>
                            <li>Cursor on <code>Dog()</code> ‚Üí <kbd>gd</kbd> ‚Üí jumps to class definition</li>
                            <li>Cursor on <code>Animal</code> in class definition ‚Üí <kbd>gd</kbd> ‚Üí jumps to base class</li>
                            <li>Cursor on <code>speak</code> method ‚Üí <kbd>gI</kbd> ‚Üí shows all implementations</li>
                            <li>Cursor on <code>speak</code> in Dog ‚Üí <kbd>gr</kbd> ‚Üí finds <code>dog.speak()</code> call</li>
                        </ol>
                        <p class="success-criteria"><strong>‚úì Success:</strong> You can navigate the entire class hierarchy efficiently.</p>
                    </div>
                </div>
            </section>

            <section id="diagnostics">
                <h3>Diagnostics & Type Checking</h3>
                <p>
                    ty performs real-time type checking as you code. Combined with custom clipboard keybinds,
                    you can quickly share errors with Claude or team members.
                </p>

                <table class="keybind-table">
                    <thead>
                        <tr>
                            <th>Keybind</th>
                            <th>Description</th>
                            <th>Use Case</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><kbd>&lt;leader&gt;cy</kbd></td>
                            <td>Copy diagnostic message</td>
                            <td>Copy error to paste into Claude/Slack</td>
                        </tr>
                        <tr>
                            <td><kbd>&lt;leader&gt;cY</kbd></td>
                            <td>Copy all diagnostics on line</td>
                            <td>Copy multiple errors from one line</td>
                        </tr>
                        <tr>
                            <td><kbd>&lt;leader&gt;sd</kbd></td>
                            <td>Search diagnostics (workspace)</td>
                            <td>View all errors across entire project</td>
                        </tr>
                        <tr>
                            <td><kbd>&lt;leader&gt;sD</kbd></td>
                            <td>Search diagnostics (buffer)</td>
                            <td>View errors in current file only</td>
                        </tr>
                        <tr>
                            <td><kbd>[d</kbd> / <kbd>]d</kbd></td>
                            <td>Previous/next diagnostic</td>
                            <td>Navigate through errors sequentially</td>
                        </tr>
                    </tbody>
                </table>

                <div class="workflow-pattern">
                    <div class="pattern-header">
                        <span class="pattern-icon">‚ö°</span>
                        <h4>Pattern 4: Type Error Resolution</h4>
                    </div>
                    <div class="pattern-steps">
                        <ol>
                            <li>ty highlights a type error (red underline)</li>
                            <li>Navigate to error: <kbd>]d</kbd></li>
                            <li>Copy diagnostic: <kbd>&lt;leader&gt;cy</kbd></li>
                            <li>Add buffer to Claude: <kbd>&lt;leader&gt;ab</kbd></li>
                            <li>Toggle Claude: <kbd>&lt;leader&gt;ac</kbd></li>
                            <li>Paste error and ask: "How do I fix this type error?"</li>
                            <li>Apply Claude's suggestion</li>
                            <li>Verify error disappears</li>
                        </ol>
                    </div>
                </div>

                <div class="tip-box">
                    <div class="tip-header">
                        <span class="tip-icon">üí°</span>
                        <span>Understanding ty Diagnostics</span>
                    </div>
                    <p>
                        ty categorizes issues by severity:
                    </p>
                    <ul>
                        <li><strong style="color: var(--accent-red);">Error:</strong> Type mismatches, undefined names (will cause runtime errors)</li>
                        <li><strong style="color: var(--accent-yellow);">Warning:</strong> Unused imports, missing type hints (won't break code)</li>
                        <li><strong style="color: var(--accent-blue);">Info:</strong> Suggestions for improvement</li>
                    </ul>
                </div>

                <div class="practice-exercise">
                    <div class="exercise-header">
                        <span class="exercise-icon">üéØ</span>
                        <h4>Practice Exercise: Fix 5 Type Errors</h4>
                    </div>
                    <div class="exercise-content">
                        <p><strong>Objective:</strong> Create and fix type errors using diagnostics.</p>
                        <ol>
                            <li>Create a file with intentional type errors:
<pre><code>def add_numbers(a: int, b: int) -> int:
    return a + b

result = add_numbers("5", 10)  # Error: str instead of int
items: list[str] = [1, 2, 3]   # Error: int instead of str</code></pre>
                            </li>
                            <li>Open file in Neovim, see red squiggles</li>
                            <li>View all errors: <kbd>&lt;leader&gt;sD</kbd></li>
                            <li>Jump to first: select from picker</li>
                            <li>Copy error: <kbd>&lt;leader&gt;cy</kbd></li>
                            <li>Fix manually or ask Claude</li>
                            <li>Repeat for all errors</li>
                        </ol>
                        <p class="success-criteria"><strong>‚úì Success:</strong> No diagnostics remain, code is type-safe.</p>
                    </div>
                </div>
            </section>

            <section id="auto-import">
                <h3>Auto-Import & Completions</h3>
                <p>
                    ty's auto-import feature is enabled by default. When you type a class or function name,
                    ty suggests imports from your venv packages.
                </p>

                <div style="background: var(--bg-card); padding: 1.5rem; border-radius: 8px; margin: 1.5rem 0;">
                    <h4 style="color: var(--accent-green); margin-bottom: 1rem;">How Auto-Import Works</h4>
                    <ol style="color: var(--text-secondary); line-height: 1.8;">
                        <li>Start typing a class name: <code>Path</code></li>
                        <li>ty shows completion: <code>Path (from pathlib)</code></li>
                        <li>Accept with <kbd>Tab</kbd> or <kbd>Enter</kbd></li>
                        <li>ty automatically adds: <code>from pathlib import Path</code> at the top</li>
                    </ol>
                </div>

                <div class="practice-exercise">
                    <div class="exercise-header">
                        <span class="exercise-icon">üéØ</span>
                        <h4>Practice Exercise: Auto-Import Workflow</h4>
                    </div>
                    <div class="exercise-content">
                        <p><strong>Objective:</strong> Use auto-import for common Python packages.</p>
                        <ol>
                            <li>Create a new Python file</li>
                            <li>Type: <code>import dat</code> ‚Üí ty suggests <code>datetime</code></li>
                            <li>Accept, then type: <code>today = dat</code> ‚Üí suggests <code>datetime.now()</code></li>
                            <li>Clear file, type: <code>response = reque</code></li>
                            <li>ty suggests: <code>requests.get (from requests)</code></li>
                            <li>Accept ‚Üí import added automatically</li>
                        </ol>
                        <p class="success-criteria"><strong>‚úì Success:</strong> Imports are added without manual typing.</p>
                    </div>
                </div>
            </section>

            <section id="inlay-hints">
                <h3>Inlay Hints</h3>
                <p>
                    Inlay hints show type information inline. They're disabled by default to reduce visual clutter,
                    but you can toggle them when needed.
                </p>

                <table class="keybind-table">
                    <thead>
                        <tr>
                            <th>Keybind</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><kbd>&lt;leader&gt;uh</kbd></td>
                            <td>Toggle inlay hints</td>
                        </tr>
                    </tbody>
                </table>

                <div style="background: var(--bg-card); padding: 1.5rem; border-radius: 8px; margin: 1.5rem 0;">
                    <h4 style="color: var(--accent-blue); margin-bottom: 1rem;">Configured Inlay Hints</h4>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">This configuration disables:</p>
                    <ul style="color: var(--text-secondary);">
                        <li><code>inlayHints.variableTypes</code>: Don't show types for every variable</li>
                        <li><code>inlayHints.callArgumentNames</code>: Don't show parameter names in function calls</li>
                    </ul>
                    <p style="color: var(--text-secondary); margin-top: 1rem;">
                        <strong>Why?</strong> Keeps code readable. Enable temporarily with <kbd>&lt;leader&gt;uh</kbd> when exploring unfamiliar code.
                    </p>
                </div>
            </section>

            <!-- Integration with AI -->
            <section id="ai-integration">
                <h2>Integration with AI</h2>
                <p>
                    Combine ty's diagnostics with Claude for powerful Python workflows.
                </p>

                <div class="workflow-pattern">
                    <div class="pattern-header">
                        <span class="pattern-icon">‚ö°</span>
                        <h4>Pattern 5: Add Type Annotations with Claude</h4>
                    </div>
                    <div class="pattern-steps">
                        <ol>
                            <li>Write a function without type hints</li>
                            <li>Add buffer to Claude: <kbd>&lt;leader&gt;ab</kbd></li>
                            <li>Toggle Claude: <kbd>&lt;leader&gt;ac</kbd></li>
                            <li>Ask: "Add complete type annotations to all functions using Python 3.10+ syntax"</li>
                            <li>Claude proposes typed version</li>
                            <li>Accept: <kbd>&lt;leader&gt;aa</kbd></li>
                            <li>Verify with ty: no type errors</li>
                        </ol>
                    </div>
                </div>

                <div class="workflow-pattern">
                    <div class="pattern-header">
                        <span class="pattern-icon">‚ö°</span>
                        <h4>Pattern 6: Convert to Dataclasses</h4>
                    </div>
                    <div class="pattern-steps">
                        <ol>
                            <li>Have a class with __init__ boilerplate</li>
                            <li>Send to Claude: <kbd>&lt;leader&gt;ab</kbd></li>
                            <li>Ask: "Convert this to use @dataclass with proper type hints"</li>
                            <li>Review Claude's refactoring</li>
                            <li>Accept and test</li>
                        </ol>
                    </div>
                </div>
            </section>

            <!-- Troubleshooting -->
            <section id="troubleshooting">
                <h2>Troubleshooting</h2>

                <div style="display: grid; gap: 1.5rem;">
                    <div style="background: var(--bg-card); padding: 1.5rem; border-radius: 8px;">
                        <h4 style="color: var(--accent-peach);">ty not starting?</h4>
                        <ul style="color: var(--text-secondary);">
                            <li>Check venv is selected: <kbd>&lt;leader&gt;cv</kbd></li>
                            <li>Restart LSP: <code>:LspRestart ty</code></li>
                            <li>Check LSP status: <code>:LspInfo</code></li>
                            <li>Ensure ty is installed in your venv</li>
                        </ul>
                    </div>

                    <div style="background: var(--bg-card); padding: 1.5rem; border-radius: 8px;">
                        <h4 style="color: var(--accent-peach);">Wrong imports or missing completions?</h4>
                        <ul style="color: var(--text-secondary);">
                            <li>Verify correct venv is active</li>
                            <li>Check package is installed: <code>poetry show</code> or <code>pip list</code></li>
                            <li>Restart ty: <code>:LspRestart ty</code></li>
                            <li>Reload buffer: <code>:e</code></li>
                        </ul>
                    </div>

                    <div style="background: var(--bg-card); padding: 1.5rem; border-radius: 8px;">
                        <h4 style="color: var(--accent-peach);">Slow completions in large project?</h4>
                        <ul style="color: var(--text-secondary);">
                            <li>ty is generally fast, but check CPU usage</li>
                            <li>Consider adding directories to <code>.gitignore</code> (e.g., <code>data/</code>)</li>
                            <li>Close unused buffers</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Keybind Reference -->
            <section id="keybind-reference">
                <h2>Complete Keybind Reference</h2>

                <table class="keybind-table">
                    <thead>
                        <tr>
                            <th>Keybind</th>
                            <th>Description</th>
                            <th>Category</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><kbd>&lt;leader&gt;cv</kbd></td>
                            <td>Select Python virtual environment</td>
                            <td><span class="category-badge">Venv</span></td>
                        </tr>
                        <tr>
                            <td><kbd>&lt;leader&gt;cV</kbd></td>
                            <td>Use cached venv</td>
                            <td><span class="category-badge">Venv</span></td>
                        </tr>
                        <tr>
                            <td><kbd>gd</kbd></td>
                            <td>Go to definition</td>
                            <td><span class="category-badge">LSP</span></td>
                        </tr>
                        <tr>
                            <td><kbd>gr</kbd></td>
                            <td>Go to references</td>
                            <td><span class="category-badge">LSP</span></td>
                        </tr>
                        <tr>
                            <td><kbd>gI</kbd></td>
                            <td>Go to implementation</td>
                            <td><span class="category-badge">LSP</span></td>
                        </tr>
                        <tr>
                            <td><kbd>gy</kbd></td>
                            <td>Go to type definition</td>
                            <td><span class="category-badge">LSP</span></td>
                        </tr>
                        <tr>
                            <td><kbd>gai</kbd></td>
                            <td>Incoming calls</td>
                            <td><span class="category-badge">LSP</span></td>
                        </tr>
                        <tr>
                            <td><kbd>gao</kbd></td>
                            <td>Outgoing calls</td>
                            <td><span class="category-badge">LSP</span></td>
                        </tr>
                        <tr>
                            <td><kbd>&lt;leader&gt;cy</kbd></td>
                            <td>Copy diagnostic message</td>
                            <td><span class="category-badge">Diagnostics</span></td>
                        </tr>
                        <tr>
                            <td><kbd>&lt;leader&gt;cY</kbd></td>
                            <td>Copy all diagnostics</td>
                            <td><span class="category-badge">Diagnostics</span></td>
                        </tr>
                        <tr>
                            <td><kbd>&lt;leader&gt;sd</kbd></td>
                            <td>Search diagnostics (workspace)</td>
                            <td><span class="category-badge">Diagnostics</span></td>
                        </tr>
                        <tr>
                            <td><kbd>&lt;leader&gt;sD</kbd></td>
                            <td>Search diagnostics (buffer)</td>
                            <td><span class="category-badge">Diagnostics</span></td>
                        </tr>
                        <tr>
                            <td><kbd>&lt;leader&gt;uh</kbd></td>
                            <td>Toggle inlay hints</td>
                            <td><span class="category-badge">UI</span></td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Challenge Exercises -->
            <section id="challenges">
                <h2>Challenge Exercises</h2>

                <div class="practice-exercise" style="margin-bottom: 2rem;">
                    <div class="exercise-header">
                        <span class="exercise-icon">üèÜ</span>
                        <h4>Challenge 1: Create Typed Poetry Project</h4>
                    </div>
                    <div class="exercise-content">
                        <p><strong>Task:</strong> Set up a fully-typed Poetry project with tests.</p>
                        <ol>
                            <li>Create: <code>poetry new mytyped && cd mytyped</code></li>
                            <li>Add dev dependencies: <code>poetry add --group dev pytest mypy</code></li>
                            <li>Open in Neovim, select venv: <kbd>&lt;leader&gt;cv</kbd></li>
                            <li>Create a typed module in <code>mytyped/core.py</code></li>
                            <li>Use ty to ensure all functions have type hints</li>
                            <li>Use Claude to generate tests: <kbd>&lt;leader&gt;ab</kbd> ‚Üí ask for pytest tests</li>
                            <li>Run tests: <code>poetry run pytest</code></li>
                        </ol>
                        <p class="success-criteria"><strong>‚úì Success:</strong> Zero type errors, all tests pass.</p>
                    </div>
                </div>

                <div class="practice-exercise" style="margin-bottom: 2rem;">
                    <div class="exercise-header">
                        <span class="exercise-icon">üèÜ</span>
                        <h4>Challenge 2: Refactor with Type Safety</h4>
                    </div>
                    <div class="exercise-content">
                        <p><strong>Task:</strong> Take untyped code and make it fully type-safe.</p>
                        <ol>
                            <li>Find or create a Python file without type annotations</li>
                            <li>Add buffer to Claude: <kbd>&lt;leader&gt;ab</kbd></li>
                            <li>Ask: "Add complete type annotations with Python 3.10+ syntax"</li>
                            <li>Accept Claude's changes: <kbd>&lt;leader&gt;aa</kbd></li>
                            <li>Navigate through code with <kbd>gd</kbd> and <kbd>gr</kbd></li>
                            <li>Fix any type errors ty identifies</li>
                            <li>Verify no diagnostics: <kbd>&lt;leader&gt;sD</kbd></li>
                        </ol>
                        <p class="success-criteria"><strong>‚úì Success:</strong> Every function and variable is properly typed.</p>
                    </div>
                </div>

                <div class="practice-exercise">
                    <div class="exercise-header">
                        <span class="exercise-icon">üèÜ</span>
                        <h4>Challenge 3: Debug Complex Type Error</h4>
                    </div>
                    <div class="exercise-content">
                        <p><strong>Task:</strong> Use LSP navigation to trace a type mismatch through multiple files.</p>
                        <ol>
                            <li>Create a multi-file project with a type error propagating across modules</li>
                            <li>Start at the error: <kbd>]d</kbd></li>
                            <li>Copy diagnostic: <kbd>&lt;leader&gt;cy</kbd></li>
                            <li>Trace the type: <kbd>gy</kbd> to see type definition</li>
                            <li>Find all references: <kbd>gr</kbd></li>
                            <li>Use Claude to understand the fix</li>
                            <li>Apply fix and verify</li>
                        </ol>
                        <p class="success-criteria"><strong>‚úì Success:</strong> You understand the type error root cause and fix it.</p>
                    </div>
                </div>
            </section>

            <!-- Navigation -->
            <nav class="lesson-nav">
                <a href="01-ai-mastery.html" class="nav-btn prev">
                    ‚Üê Previous: AI Mastery
                </a>
                <a href="03-devops-flow.html" class="nav-btn next">
                    Next: DevOps Flow ‚Üí
                </a>
            </nav>
        </main>
    </div>

    <!-- Search Modal -->
    <div class="search-modal" id="search-modal">
        <div class="search-container">
            <div class="search-input-container">
                <input type="text" class="search-input" id="search-input" placeholder="Search keybinds..." autocomplete="off">
            </div>
            <div class="search-results" id="search-results">
                <p style="color: var(--text-muted); text-align: center; padding: 2rem;">Type to search...</p>
            </div>
            <div class="search-footer">
                <div>
                    <kbd style="background: var(--bg-primary); padding: 0.25rem 0.5rem; border-radius: 4px;">‚Üë‚Üì</kbd> Navigate
                    <kbd style="background: var(--bg-primary); padding: 0.25rem 0.5rem; border-radius: 4px; margin-left: 0.5rem;">Enter</kbd> Go
                </div>
                <div>
                    <kbd style="background: var(--bg-primary); padding: 0.25rem 0.5rem; border-radius: 4px;">Esc</kbd> Close
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../assets/js/script.js"></script>
    <script src="../assets/js/progress.js"></script>
    <script src="../assets/js/search.js"></script>
    <script src="../assets/js/guide-nav.js"></script>
    <script>
        // Mark complete button handler
        document.addEventListener('DOMContentLoaded', function() {
            const markCompleteBtn = document.getElementById('mark-complete');
            if (markCompleteBtn) {
                const progress = getProgress();
                if (progress && progress.lessons['02'] && progress.lessons['02'].completed) {
                    markCompleteBtn.classList.add('completed');
                    markCompleteBtn.innerHTML = '‚úì Lesson Completed';
                }

                markCompleteBtn.addEventListener('click', function() {
                    const isCompleted = this.classList.contains('completed');
                    markLessonComplete('02', !isCompleted);

                    if (!isCompleted) {
                        this.classList.add('completed');
                        this.innerHTML = '‚úì Lesson Completed';
                    } else {
                        this.classList.remove('completed');
                        this.innerHTML = '‚úì Mark Lesson as Complete';
                    }
                });
            }
        });
    </script>
</body>
</html>
